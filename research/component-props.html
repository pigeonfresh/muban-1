<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Component Props | Muban</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Writing components for server-rendered HTML">
    
    <link rel="preload" href="/muban/assets/css/0.styles.fc90fd1a.css" as="style"><link rel="preload" href="/muban/assets/js/app.48237296.js" as="script"><link rel="preload" href="/muban/assets/js/2.de8cd9c4.js" as="script"><link rel="preload" href="/muban/assets/js/23.d8a186b2.js" as="script"><link rel="prefetch" href="/muban/assets/js/10.7c55db09.js"><link rel="prefetch" href="/muban/assets/js/11.a9e9df60.js"><link rel="prefetch" href="/muban/assets/js/12.e7cc04fe.js"><link rel="prefetch" href="/muban/assets/js/13.cc337c60.js"><link rel="prefetch" href="/muban/assets/js/14.c7055ebb.js"><link rel="prefetch" href="/muban/assets/js/15.1fbfe614.js"><link rel="prefetch" href="/muban/assets/js/16.7f688880.js"><link rel="prefetch" href="/muban/assets/js/17.65a01f70.js"><link rel="prefetch" href="/muban/assets/js/18.e17083c9.js"><link rel="prefetch" href="/muban/assets/js/19.9532445d.js"><link rel="prefetch" href="/muban/assets/js/20.2e603409.js"><link rel="prefetch" href="/muban/assets/js/21.ddf04c2e.js"><link rel="prefetch" href="/muban/assets/js/22.60d5b2a5.js"><link rel="prefetch" href="/muban/assets/js/24.eabdf387.js"><link rel="prefetch" href="/muban/assets/js/25.33fc5c13.js"><link rel="prefetch" href="/muban/assets/js/26.e94df976.js"><link rel="prefetch" href="/muban/assets/js/27.b0ab94dc.js"><link rel="prefetch" href="/muban/assets/js/3.4c8c1865.js"><link rel="prefetch" href="/muban/assets/js/4.af860640.js"><link rel="prefetch" href="/muban/assets/js/5.ac9e9e87.js"><link rel="prefetch" href="/muban/assets/js/6.dc00f921.js"><link rel="prefetch" href="/muban/assets/js/7.b073ec24.js"><link rel="prefetch" href="/muban/assets/js/8.44fb1b58.js"><link rel="prefetch" href="/muban/assets/js/9.2865af3c.js">
    <link rel="stylesheet" href="/muban/assets/css/0.styles.fc90fd1a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/muban/" class="home-link router-link-active"><!----> <span class="site-name">Muban</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/muban/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/muban/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/muban/api/" class="nav-link">
  Api
</a></div><div class="nav-item"><a href="/muban/research/" class="nav-link router-link-active">
  Research
</a></div> <a href="https://github.com/mubanjs/muban" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/muban/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/muban/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/muban/api/" class="nav-link">
  Api
</a></div><div class="nav-item"><a href="/muban/research/" class="nav-link router-link-active">
  Research
</a></div> <a href="https://github.com/mubanjs/muban" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/muban/research/" aria-current="page" class="sidebar-link">Research</a></li><li><a href="/muban/research/lifecycle.html" class="sidebar-link">Lifecycle</a></li><li><a href="/muban/research/component-props.html" aria-current="page" class="active sidebar-link">Component Props</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#html" class="sidebar-link">HTML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#data-attributes" class="sidebar-link">data- attributes</a></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#data-props" class="sidebar-link">data-props</a></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#json-script-tag" class="sidebar-link">JSON script tag</a></li></ul></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#definition" class="sidebar-link">Definition</a></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#usage" class="sidebar-link">Usage</a></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#changing-props" class="sidebar-link">Changing props</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#updating" class="sidebar-link">Updating</a></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#reacting" class="sidebar-link">Reacting</a></li></ul></li><li class="sidebar-sub-header"><a href="/muban/research/component-props.html#responsibility" class="sidebar-link">Responsibility</a></li></ul></li><li><a href="/muban/research/component-refs.html" class="sidebar-link">Component Refs</a></li><li><a href="/muban/research/component-dynamic-templates.html" class="sidebar-link">Dynamic Templates</a></li><li><a href="/muban/research/reactivity.html" class="sidebar-link">Exploring reactivity</a></li><li><a href="/muban/research/pure-rendering.html" class="sidebar-link">Pure rendering</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="component-props"><a href="#component-props" class="header-anchor">#</a> Component Props</h1> <p></p><div class="table-of-contents"><ul><li><a href="#html">HTML</a><ul><li><a href="#data-attributes">data- attributes</a></li><li><a href="#data-props">data-props</a></li><li><a href="#json-script-tag">JSON script tag</a></li></ul></li><li><a href="#definition">Definition</a></li><li><a href="#usage">Usage</a></li><li><a href="#changing-props">Changing props</a><ul><li><a href="#updating">Updating</a></li><li><a href="#reacting">Reacting</a></li></ul></li><li><a href="#responsibility">Responsibility</a></li></ul></div><p></p> <p>This document explores how to integrate &quot;outside&quot; props into the component.</p> <p>In muban, components are mounted on existing DOM elements, instead of rendered by a parent.
This means that passing of props happens through the HTML, at least initially. The most straight-forward way of defining
props in html is through the <code>data-</code> attributes (e.g. <code>&lt;div data-color=&quot;#FF0000&quot;&gt;</code>).</p> <p>Components can read these properties through the <code>dataset</code> DOM API: <code>element.dataset.color</code>.</p> <p>While the above works fine for basic scenarios, we can do a lot of things to improve the Developer Experience.</p> <h2 id="html"><a href="#html" class="header-anchor">#</a> HTML</h2> <h3 id="data-attributes"><a href="#data-attributes" class="header-anchor">#</a> <code>data-</code> attributes</h3> <p>As seen in the example we can use <code>data-</code> attributes to store property values. When defining them, they are always
strings. If we need to convert them to other primitives or objects, we have to do that ourselves.</p> <h3 id="data-props"><a href="#data-props" class="header-anchor">#</a> data-props</h3> <p>One way to improve on this, is to use a single <code>data-props</code> attribute, and fill this with a JSON payload.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{ <span class="token punctuation">&quot;</span>foo<span class="token punctuation">&quot;</span>: true, <span class="token punctuation">&quot;</span>bar<span class="token punctuation">&quot;</span>: [1, 5], <span class="token punctuation">&quot;</span>baz<span class="token punctuation">&quot;</span>: <span class="token punctuation">&quot;</span>you<span class="token punctuation">'</span></span><span class="token attr-name">re</span> <span class="token attr-name">it&quot;</span> <span class="token attr-name">}'</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Pros:</p> <ul><li>single data attribute, clear purpose</li> <li>allows nested objects and arrays as properties</li> <li>allows typing</li></ul> <p>Cons:</p> <ul><li>awkward syntax with single-quotes around the JSON</li> <li>might be harder to conditionally render for CMS systems in the template language, or connect to CMS UI settings</li> <li>needs to be escaped to allow for single quotes (or other dangerous sequences) (<code>%27</code>)</li></ul> <h3 id="json-script-tag"><a href="#json-script-tag" class="header-anchor">#</a> JSON script tag</h3> <p>Another option would be to output a script tag within the component HTML (that is not executed), that contains a JSON
payload. This can be read and parsed by the component, and exposed as a props object.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>carousel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>application/json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token punctuation">{</span> <span class="token string">&quot;foo&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;baz&quot;</span><span class="token operator">:</span> <span class="token string">&quot;you're it&quot;</span> <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>other HTML<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Pros:</p> <ul><li>dedicated place to put props</li> <li>allows nested objects and arrays as properties</li> <li>allows typing</li> <li>no encoding issues</li></ul> <p>Cons:</p> <ul><li>might be harder to conditionally render for CMS systems in the template language, or connect to CMS UI settings</li> <li>outputs a bit more code on the page</li></ul> <h2 id="definition"><a href="#definition" class="header-anchor">#</a> Definition</h2> <p>Even though the props can be retrieved from the HTML and exposed as an object, in the component itself we have no
guarantees or information about them. If we can define them as prop types, we can use this information in the component.</p> <p>Inspired by Vue, we could use something similar:</p> <div class="language-js extra-class"><pre class="language-js"><code>  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Basic type check (`null` and `undefined` values will pass any type validation)</span>
    propA<span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token comment">// Multiple possible types</span>
    propB<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// Required string</span>
    propC<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Number with a default value</span>
    propD<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Object with a default value</span>
    propE<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token comment">// Object or array defaults must be returned from</span>
      <span class="token comment">// a factory function</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Custom validator function</span>
    propF<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// The value must match one of these strings</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token string">'danger'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Or more powerful <a href="https://github.com/dwightjack/vue-types" target="_blank" rel="noopener noreferrer">vue-types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Basic type check (`null` and `undefined` values will pass any type validation)</span>
    propA<span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token comment">// Multiple possible types</span>
    propB<span class="token operator">:</span> VueTypes<span class="token punctuation">.</span><span class="token function">oneOfType</span><span class="token punctuation">(</span><span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Required string</span>
    propC<span class="token operator">:</span> VueTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    <span class="token comment">// Number with a default value</span>
    propD<span class="token operator">:</span> VueTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span><span class="token function">def</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Object with a default value</span>
    propE<span class="token operator">:</span> VueTypes<span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      message<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">def</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Custom validator function</span>
    propF<span class="token operator">:</span> VueTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token string">'danger'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>The main thing to accomplish, besides all the features above, is to type the props object that is used in the component:</p> <ul><li>with the right type/shape</li> <li>with the right optional/required</li></ul> <h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <p>I think this is pretty straight forward when settling on a component design itself, but could look like:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// function component</span>
<span class="token keyword">const</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Carousel</span><span class="token punctuation">(</span>props<span class="token operator">:</span> Props<span class="token operator">&lt;</span><span class="token keyword">typeof</span> propTypes<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// can this be inferred?</span>
<span class="token punctuation">}</span>
Carousel<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> propTypes<span class="token punctuation">;</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// class component</span>
<span class="token keyword">class</span> <span class="token class-name">Carousel</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractComponent</span> <span class="token punctuation">{</span>
  propTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// how to type?</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>props
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// options component</span>
<span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> props <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// types are &quot;fixed&quot; by `defineComponent`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="changing-props"><a href="#changing-props" class="header-anchor">#</a> Changing props</h2> <p>In some scenarios it could happen that a parent component wants a child component to update based on user interaction.
A way to do this would be to change the props for that child component. This will need two things to work:</p> <ol><li>A way for the parent to change/pass the props</li> <li>A way for the child component to receive &quot;updates&quot; when those props are changed.</li></ol> <h3 id="updating"><a href="#updating" class="header-anchor">#</a> Updating</h3> <p>Since the original props are stored on the DOM in some way, updating the props could be done in the same way, where a
util function could write the updated props to the DOM, signals the child component, which re-executes their prop-logic.</p> <p>The alternative is to bypass the DOM, and directly pass the (new) props to the validation function. This saves us from
writing to and reading from the DOM. Storing this information in the DOM will probably not be needed for anything else.</p> <h3 id="reacting"><a href="#reacting" class="header-anchor">#</a> Reacting</h3> <p>Reacting to prop updates will be different depending on the type of component, and the chosen architecture (reactive
vs pure).</p> <p>For class-based components, it's not possible to call the constructor again with the new props. Similar to the React
class components, we could call a componentWillReceiveProps function, or something similar, that passes the new props.</p> <p>For a pure setup with just a function, it can just re-execute the function with the new props. Pretty simple.</p> <p>For a reactive setup, with an options-object, the passed props object should probably be observable. If the original
props were used in any other reactive structures or DOM bindings, those should be re-execute automatically.</p> <h2 id="responsibility"><a href="#responsibility" class="header-anchor">#</a> Responsibility</h2> <p>Who should be responsible for what?</p> <p>A single component could perfectly read and process its own props from the DOM. Different components could theoretically
implement different methods of placing, reading, parsing/validating and using the props. Which is perfect.</p> <p>But, when components need to communicate with each other, who is responsible for updating the props from the outside?
Can we define a common public API for all component types that allow all different component designs to talk to each
other without needing additional framework utils?</p> <p>Even if that's possible, how would a parent component get hold of a child component &quot;instance&quot;? Could this happen by
just storing the reference in the DOM element - so there is no need for a framework that provides lookup access?
It seems that storing such information in the DOM itself is not possible (the DOM APIs are deprecated), so the only
option seems to be to use a <code>WeakMap</code> with the DOM element as key, and the component as value. This WeakMap should live
somewhere &quot;global&quot;, so should probably be considered part of the framework - that could provide util functions to
make working with this easier?</p> <p>Maybe, the component part of the &quot;framework&quot; should just be part of the component package!</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/muban/research/lifecycle.html" class="prev">
        Lifecycle
      </a></span> <span class="next"><a href="/muban/research/component-refs.html">
        Component Refs
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/muban/assets/js/app.48237296.js" defer></script><script src="/muban/assets/js/2.de8cd9c4.js" defer></script><script src="/muban/assets/js/23.d8a186b2.js" defer></script>
  </body>
</html>
